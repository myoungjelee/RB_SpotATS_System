# RB_SpotATS_System (System Validation Repository)

> 본 레포지토리는 강의 레포지토리를 포크하여 출발했으나,
> 로컬 프로젝트 구조에 맞게 config / launch / policy 경로를 전면 수정하였으며,
> 강의를 따라가며 모든 실행을 직접 검증하는 용도로 사용되고 있습니다.
> 로봇 시스템 관점에서 *정책 적용·연동·설정 검증*을 수행한 학습·정리용 프로젝트입니다.
>
> 강화학습 성능 향상이나 신규 알고리즘 제안이 목적이 아니며,
> **이미 학습된 정책을 실제 시스템 파이프라인에 얹었을 때 무엇이 문제되는지를 구조적으로 이해하는 것**에 초점을 둡니다.

---

## 프로젝트 개요

**RB_SpotATS_System**은 Isaac Lab 기반 Spot 로봇 시스템에
**ATS(Auto Targeting System)** 모듈을 통합한 환경에서,

- 학습된 locomotion 정책을 어떻게 로딩·교체하는지
- 시스템 설정(cfg, TF, 센서 구성)이 정책 거동에 어떤 영향을 주는지
- ROS 2 기반 실행 파이프라인에서 어떤 정합성 문제가 발생하는지

를 **시스템 엔지니어 관점에서 검증·정리한 레포지토리**입니다.

이 레포지토리는 다음 질문에 답하는 것을 목표로 합니다.

> “강화학습으로 학습된 정책을
> 실제 로봇 시스템 구조에 적용하면,
> 어떤 문제가 어디에서 발생하고,
> 무엇을 설정으로 해결해야 하는가?”

---

## 강화학습 레포지토리와의 관계

이 레포지토리에서는 **강화학습 학습 과정 자체를 다루지 않습니다.**

- 정책 학습
- reward 설계
- 파라미터 스윕 및 실험 운영

위 항목은 별도의 강화학습 전용 레포지토리에서 수행되었습니다.

👉 강화학습 실험 및 학습 기록은 다음 레포지토리에 정리되어 있습니다:

- [`RL_SpotATS`](https://github.com/myoungjelee/RL_SpotATS)

본 레포지토리는 **학습이 끝난 정책을 시스템에 적용·검증하는 역할**만을 담당합니다.

---

## 프로젝트 성격 정리

이 레포지토리는 다음을 **하지 않습니다**:

- 강화학습 알고리즘 연구
- 신규 보행 정책 설계
- 성능 수치(SOTA) 경쟁

대신 다음을 **집중적으로 다룹니다**:

- Isaac Lab 기반 로봇 시스템 구조 이해
- 학습된 정책의 로딩·교체 흐름 검증
- ATS 통합에 따른 질량·관성·TF 구조 변화 분석
- ROS 2 실행 환경에서의 SLAM / TF / odometry 정합성 확인

즉, **로봇 제어·시스템 엔지니어 관점의 검증 레포지토리**입니다.

---

## 시스템 구성

- 로봇 플랫폼: Spot (Isaac Lab Simulation)
- 시뮬레이터: NVIDIA Isaac Sim / Isaac Lab
- 미들웨어: ROS 2 (Humble)
- 정책 형태: PPO 기반 locomotion policy (.pt)
- 확장 요소: ATS (Auto Targeting System)

---

## 시스템 검증 배경

ATS 모듈이 추가되면서 시스템에는 다음과 같은 변화가 발생했습니다.

- 로봇 상부 질량 및 관성(Inertia) 변화
- 센서 배치 변경에 따른 TF 트리 구조 변화
- 정책 로딩 경로 및 실행 흐름 복잡화

이로 인해 기존 locomotion 정책을 그대로 적용할 경우,
보행 거동 불안정 또는 시스템 설정 오류가 발생할 가능성이 존재했습니다.

본 레포지토리에서는 이러한 문제를 가정하고:

- 외부 강화학습 레포에서 학습된 정책을 불러와 적용
- cfg 기반 정책 교체 구조 구성
- ROS 2 실행 환경에서 실제로 발생하는 문제를 기준으로 설정 검증

을 수행했습니다.

---

## 정책 구성 및 적용 방식

본 프로젝트에서는 다음과 같은 정책을 시스템에 적용·검증합니다.

- `spot_policy.pt`
  - 강의 예제에서 제공된 기본 locomotion 정책

- `spot_policy_ats_retrained.pt`
  - ATS 통합 환경을 고려해 강화학습 레포에서 재학습된 정책

정책 경로는 코드에 하드코딩하지 않고,
`configs/default.yaml`을 통해 관리하여 다음이 가능하도록 구성했습니다.

- 정책 교체
- 동일 시스템 설정에서의 비교 실행

---

## 주요 시스템 검증 포인트

- ATS 통합 환경에서 정책 정상 동작 여부
- cfg 기반 정책 로딩 구조의 안정성
- ROS 2 SLAM Toolbox 설정 검증
  - odometry / TF(frame) 정합성 분석
  - `map → odom → base_link` 프레임 체계 안정화

이 과정에서 정책 성능 자체보다,
**시스템 설정과 프레임 정합성이 로봇 거동에 미치는 영향**을 중심으로 관찰했습니다.

---

## 브랜치 전략

- `dev`: 설정 실험 및 검증용 브랜치
- `main`: 검증 완료된 설정만 반영

작은 설정 변경도 dev 브랜치에서 확인한 뒤
main에 병합하는 방식으로 관리했습니다.

---

## 정리

이 레포지토리는:

- 강화학습 성능을 과시하기 위한 프로젝트가 아니며
- 강의 예제를 그대로 제출하기 위한 레포지토리도 아닙니다.

> 강화학습으로 학습된 정책을
> 실제 로봇 시스템에 적용하는 과정에서 발생하는
> 구조·설정·연동 문제를 이해하고 검증한 기록

을 남기기 위한 **로봇 시스템 검증 레포지토리**입니다.

강화학습 실험 자체는 [`RL_SpotATS`](https://github.com/myoungjelee/RL_SpotATS) 레포지토리에서 분리 수행되었으며,
본 레포지토리는 이후 **로봇 제어·시스템 엔지니어 관점의 작업에 집중**하기 위한 기반으로 유지됩니다.
